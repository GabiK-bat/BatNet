<html>
<head>
  <title>ðŸ¦‡ Bat Detector</title>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css">
  <script  src="https://code.jquery.com/jquery-3.4.1.min.js"
  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
  <script src="http://ajax.microsoft.com/ajax/jquery.templates/beta1/jquery.tmpl.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.js"></script>
  <script src="/static/script.js"></script>



  <script id="filelist-item-template" type="text/x-jQuery-tmpl">
      <div class="title">
        <i class="dropdown icon"></i>
        ${filename}
      </div>
      <div class="content" filename="${filename}">

      </div>
  </script>

  <script id="filelist-item-content-template" type="text/x-jQuery-tmpl">
      <div class="ui large images">
          <img class="ui image" src="/images/${filename}">
          <div class="ui image">
            <div class="ui dimmer" id='dimmer_${filename}'>
                  <div class="content">
                    <div class="ui primary button" filename="${filename}"
                          onclick='on_process_image(event)'>
                         Process Image
                    </div>
                  </div>
            </div>
            <img src="/images/${filename}" id="segmented_${filename}">
          </div>
      </div>
      <div class="ui small images" id="patches_${filename}">
        <!-- <img class="ui image" src="/images/patch_${i}_${filename}"> -->
      </div>
  </script>

</head>



<body>
<div class="ui container segment" style="margin-top:5px">
  <div>
     <label for="input_images" class="ui icon button">
        <i class="images icon"></i>
        Select Input Images
     </label>
     <input type="file" id="input_images" style="display:none"
           onchange="on_inputfiles_select(event)" accept="image/*" multiple>

     <label for="input_folder" class="ui icon button">
        <i class="folder icon"></i>
        Select Input Folder
     </label>
     <input type="file" id="input_folder" style="display:none"
           onchange="on_inputfolder_select(this)"  webkitdirectory directory multiple>

     <label class="ui primary button" onclick="process_all()" id="process-all-button">
         <i class="play icon"></i>
         Process All Images
     </label>

     <label class="ui icon button right floated column" onclick="on_download_csv()" id="download-csv-button">
         <i class="download icon"></i>
         Download CSV
     </label>
  </div>
</div>




<script id="filetable-item-template" type="text/x-jQuery-tmpl">
<tr class="ui title">
  <td> <i class="dropdown icon"></i>${filename}</td>
  <td id="detected_${filename}"></td>
</tr>
<tr style="display:none">
  <td colspan="5" class="ui content" filename="${filename}">

  </td>
</tr>
</script>

<div class="ui container">
<table class="ui basic celled table accordion" id="filetable">
      <thead><tr>
    <th>Filename</th>
    <th>Detected Bats</th>
    </tr></thead>
  <tbody>
    <tr class="ui">
      <td>No Files Selected</td>
      <td></td>
    </tr>
  </tbody>
</table>
</div>
<script>$('.ui.table.accordion').accordion({duration:0, onOpening:on_accordion_open});</script>
<style>
.ui.table td.active, .ui.table tr.active { background: #fff!important;  }
</style>

</body>
</html>
